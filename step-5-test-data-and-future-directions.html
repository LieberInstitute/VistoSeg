<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Step 5: Test data and future directions | VistoSeg: Visium Histology Image Segmentation and Processing Pipeline</title>
  <meta name="description" content="5 Step 5: Test data and future directions | VistoSeg: Visium Histology Image Segmentation and Processing Pipeline" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Step 5: Test data and future directions | VistoSeg: Visium Histology Image Segmentation and Processing Pipeline" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="LieberInstitute/VistoSeg" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Step 5: Test data and future directions | VistoSeg: Visium Histology Image Segmentation and Processing Pipeline" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="icon_32.png" type="image/x-icon" />
<link rel="prev" href="step-4-gui-to-count-nuclei-in-a-visium-spot.html"/>
<link rel="next" href="r-session-information.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li><a href="index.html#why-spatial-transcriptomics-or-visium-imaging">Why <em>spatial transcriptomics</em> or <em>Visium imaging</em>?</a></li>
<li><a href="index.html#cite-vistoseg">Cite <code>VistoSeg</code></a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#image-acquisition"><i class="fa fa-check"></i>Image Acquisition</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software-requirements"><i class="fa fa-check"></i>Software Requirements</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#data-availability"><i class="fa fa-check"></i>Data Availability</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="step-1-split-visium-histology-whole-slide-image-into-individual-capture-area-images.html"><a href="step-1-split-visium-histology-whole-slide-image-into-individual-capture-area-images.html"><i class="fa fa-check"></i><b>1</b> Step 1: Split Visium histology whole slide image into individual capture area images</a></li>
<li class="chapter" data-level="2" data-path="step-2-nuclei-segmentation-of-individual-capture-areas-images.html"><a href="step-2-nuclei-segmentation-of-individual-capture-areas-images.html"><i class="fa fa-check"></i><b>2</b> Step 2: Nuclei segmentation of individual capture areas images</a>
<ul>
<li class="chapter" data-level="2.1" data-path="step-2-nuclei-segmentation-of-individual-capture-areas-images.html"><a href="step-2-nuclei-segmentation-of-individual-capture-areas-images.html#vns---visium-nuclei-segmentation"><i class="fa fa-check"></i><b>2.1</b> VNS - Visium Nuclei Segmentation</a></li>
<li class="chapter" data-level="2.2" data-path="step-2-nuclei-segmentation-of-individual-capture-areas-images.html"><a href="step-2-nuclei-segmentation-of-individual-capture-areas-images.html#refinevns"><i class="fa fa-check"></i><b>2.2</b> refineVNS</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="step-3-space-ranger.html"><a href="step-3-space-ranger.html"><i class="fa fa-check"></i><b>3</b> Step 3: Space Ranger</a>
<ul>
<li class="chapter" data-level="" data-path="step-3-space-ranger.html"><a href="step-3-space-ranger.html#what-is-space-ranger"><i class="fa fa-check"></i>What is Space Ranger?</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="step-4-gui-to-count-nuclei-in-a-visium-spot.html"><a href="step-4-gui-to-count-nuclei-in-a-visium-spot.html"><i class="fa fa-check"></i><b>4</b> Step 4: GUI to count nuclei in a Visium spot</a>
<ul>
<li class="chapter" data-level="4.1" data-path="step-4-gui-to-count-nuclei-in-a-visium-spot.html"><a href="step-4-gui-to-count-nuclei-in-a-visium-spot.html#spotspotcheck"><i class="fa fa-check"></i><b>4.1</b> spotspotcheck</a></li>
<li class="chapter" data-level="4.2" data-path="step-4-gui-to-count-nuclei-in-a-visium-spot.html"><a href="step-4-gui-to-count-nuclei-in-a-visium-spot.html#countnuclei"><i class="fa fa-check"></i><b>4.2</b> countNuclei</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="step-5-test-data-and-future-directions.html"><a href="step-5-test-data-and-future-directions.html"><i class="fa fa-check"></i><b>5</b> Step 5: Test data and future directions</a>
<ul>
<li class="chapter" data-level="5.1" data-path="step-5-test-data-and-future-directions.html"><a href="step-5-test-data-and-future-directions.html#public-datasets"><i class="fa fa-check"></i><b>5.1</b> Public datasets</a></li>
<li class="chapter" data-level="5.2" data-path="step-5-test-data-and-future-directions.html"><a href="step-5-test-data-and-future-directions.html#future-directions"><i class="fa fa-check"></i><b>5.2</b> Future directions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="r-session-information.html"><a href="r-session-information.html"><i class="fa fa-check"></i>R session information</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">VistoSeg: Visium Histology Image Segmentation and Processing Pipeline</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="step-5-test-data-and-future-directions" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Step 5: Test data and future directions</h1>
<div id="public-datasets" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Public datasets</h2>
<p>The pipeline with default settings (smoothening and color clusters of k-means in VNS function) used for in house data has been applied on the <a href="https://support.10xgenomics.com/spatial-gene-expression/datasets">public datasets</a> provided by 10x Genomics. To demonstrate the utility of the pipeline on different datasets we chose images obtained from different tissues, <a href="https://support.10xgenomics.com/spatial-gene-expression/datasets/1.1.0/V1_Breast_Cancer_Block_A_Section_1">breast tissue</a> with high density of cells and <a href="https://support.10xgenomics.com/spatial-gene-expression/datasets/1.1.0/V1_Human_Heart">human heart tissue</a> with low density of cells. Decent segmentation results were obtained with the default settings on the human heart tissue image given the low image resolution. With the number of color clusters changed from 5 (defalut) to 3 for breast tissue, the highly clustered cells were detected.</p>
<p>A. Heart Tissue</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb10-1"><a href="step-5-test-data-and-future-directions.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="va">code</span> <span class="op">=</span> <span class="ss">&#39;/path to the code/VistoSeg/code&#39;</span><span class="op">;</span></span>
<span id="cb10-2"><a href="step-5-test-data-and-future-directions.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="va">addpath</span>(<span class="va">genpath</span>(<span class="va">code</span>))</span>
<span id="cb10-3"><a href="step-5-test-data-and-future-directions.html#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="va">fname</span> <span class="op">=</span> <span class="ss">&#39;/path to the file/V1_Human_Heart_image.tif&#39;</span><span class="op">;</span></span>
<span id="cb10-4"><a href="step-5-test-data-and-future-directions.html#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="va">N</span> <span class="op">=</span> <span class="fl">5</span><span class="op">;</span></span>
<span id="cb10-5"><a href="step-5-test-data-and-future-directions.html#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="step-5-test-data-and-future-directions.html#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="va">VNS</span>(<span class="va">fname</span><span class="op">,</span><span class="va">N</span>)</span>
<span id="cb10-7"><a href="step-5-test-data-and-future-directions.html#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="va">Importing</span> <span class="va">capture</span> <span class="va">area</span></span>
<span id="cb10-8"><a href="step-5-test-data-and-future-directions.html#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="va">Elapsed</span> <span class="va">time</span> <span class="va">is</span> <span class="fl">12.898534</span> <span class="va">seconds</span>.</span>
<span id="cb10-9"><a href="step-5-test-data-and-future-directions.html#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="va">Performing</span> <span class="va">smoothening</span> <span class="va">and</span> <span class="va">contrast</span> <span class="va">adjustment</span></span>
<span id="cb10-10"><a href="step-5-test-data-and-future-directions.html#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="va">Elapsed</span> <span class="va">time</span> <span class="va">is</span> <span class="fl">15.198035</span> <span class="va">seconds</span>.</span>
<span id="cb10-11"><a href="step-5-test-data-and-future-directions.html#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="va">Performing</span> <span class="va">rgb</span> <span class="va">to</span> <span class="va">Lab</span> <span class="va">color</span> <span class="va">space</span> <span class="va">conversion</span></span>
<span id="cb10-12"><a href="step-5-test-data-and-future-directions.html#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="va">Elapsed</span> <span class="va">time</span> <span class="va">is</span> <span class="fl">17.632075</span> <span class="va">seconds</span>.</span>
<span id="cb10-13"><a href="step-5-test-data-and-future-directions.html#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="va">Applying</span> <span class="va">Kmeans</span></span>
<span id="cb10-14"><a href="step-5-test-data-and-future-directions.html#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="va">Elapsed</span> <span class="va">time</span> <span class="va">is</span> <span class="fl">277.069572</span> <span class="va">seconds</span>.</span>
<span id="cb10-15"><a href="step-5-test-data-and-future-directions.html#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="va">saving</span> <span class="va">outputs</span></span>
<span id="cb10-16"><a href="step-5-test-data-and-future-directions.html#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="va">Starting</span> <span class="va">parallel</span> <span class="va">pool</span> (<span class="va">parpool</span>) <span class="va">using</span> <span class="va">the</span> <span class="ss">&#39;local&#39;</span> <span class="va">profile</span> <span class="op">...</span></span>
<span id="cb10-17"><a href="step-5-test-data-and-future-directions.html#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="va">Connected</span> <span class="va">to</span> <span class="va">the</span> <span class="va">parallel</span> <span class="va">pool</span> (<span class="va">number</span> <span class="va">of</span> <span class="va">workers</span><span class="op">:</span> <span class="fl">2</span>).</span>
<span id="cb10-18"><a href="step-5-test-data-and-future-directions.html#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="va">Elapsed</span> <span class="va">time</span> <span class="va">is</span> <span class="fl">161.220875</span> <span class="va">seconds</span>.</span>
<span id="cb10-19"><a href="step-5-test-data-and-future-directions.html#cb10-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-20"><a href="step-5-test-data-and-future-directions.html#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="va">M</span><span class="op">=</span><span class="fl">1</span><span class="op">;</span></span>
<span id="cb10-21"><a href="step-5-test-data-and-future-directions.html#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="va">refineVNS</span>(<span class="va">fname</span><span class="op">,</span><span class="va">M</span>)</span>
<span id="cb10-22"><a href="step-5-test-data-and-future-directions.html#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="va">loading</span> <span class="va">data</span></span>
<span id="cb10-23"><a href="step-5-test-data-and-future-directions.html#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="va">Elapsed</span> <span class="va">time</span> <span class="va">is</span> <span class="fl">3.157618</span> <span class="va">seconds</span>.</span>
<span id="cb10-24"><a href="step-5-test-data-and-future-directions.html#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="va">refining</span> <span class="va">segmentations</span></span>
<span id="cb10-25"><a href="step-5-test-data-and-future-directions.html#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="va">Elapsed</span> <span class="va">time</span> <span class="va">is</span> <span class="fl">36.612378</span> <span class="va">seconds</span>.</span>
<span id="cb10-26"><a href="step-5-test-data-and-future-directions.html#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="va">saving</span> <span class="va">final</span> <span class="va">segmentations</span></span>
<span id="cb10-27"><a href="step-5-test-data-and-future-directions.html#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="va">Elapsed</span> <span class="va">time</span> <span class="va">is</span> <span class="fl">1.899226</span> <span class="va">seconds</span>.</span>
<span id="cb10-28"><a href="step-5-test-data-and-future-directions.html#cb10-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-29"><a href="step-5-test-data-and-future-directions.html#cb10-29" aria-hidden="true" tabindex="-1"></a><span class="va">spotspotcheck</span></span>
<span id="cb10-30"><a href="step-5-test-data-and-future-directions.html#cb10-30" aria-hidden="true" tabindex="-1"></a><span class="va">loading</span><span class="op">...</span>..</span>
<span id="cb10-31"><a href="step-5-test-data-and-future-directions.html#cb10-31" aria-hidden="true" tabindex="-1"></a><span class="fl">93741</span> <span class="va">cells</span> <span class="va">detected</span></span>
<span id="cb10-32"><a href="step-5-test-data-and-future-directions.html#cb10-32" aria-hidden="true" tabindex="-1"></a><span class="fl">4992</span> <span class="va">spots</span> <span class="va">detected</span></span>
<span id="cb10-33"><a href="step-5-test-data-and-future-directions.html#cb10-33" aria-hidden="true" tabindex="-1"></a><span class="va">counting</span> <span class="va">nuclei</span> <span class="va">per</span> <span class="va">spot</span></span>
<span id="cb10-34"><a href="step-5-test-data-and-future-directions.html#cb10-34" aria-hidden="true" tabindex="-1"></a><span class="fl">100</span> <span class="va">spots</span> <span class="va">finished</span> <span class="va">in</span> <span class="va">time</span> <span class="fl">32.3861</span><span class="va">s</span></span>
<span id="cb10-35"><a href="step-5-test-data-and-future-directions.html#cb10-35" aria-hidden="true" tabindex="-1"></a><span class="fl">200</span> <span class="va">spots</span> <span class="va">finished</span> <span class="va">in</span> <span class="va">time</span> <span class="fl">61.5043</span><span class="va">s</span></span>
<span id="cb10-36"><a href="step-5-test-data-and-future-directions.html#cb10-36" aria-hidden="true" tabindex="-1"></a><span class="fl">300</span> <span class="va">spots</span> <span class="va">finished</span> <span class="va">in</span> <span class="va">time</span> <span class="fl">98.5936</span><span class="va">s</span></span>
<span id="cb10-37"><a href="step-5-test-data-and-future-directions.html#cb10-37" aria-hidden="true" tabindex="-1"></a><span class="fl">400</span> <span class="va">spots</span> <span class="va">finished</span> <span class="va">in</span> <span class="va">time</span> <span class="fl">141.2028</span><span class="va">s</span></span>
<span id="cb10-38"><a href="step-5-test-data-and-future-directions.html#cb10-38" aria-hidden="true" tabindex="-1"></a><span class="fl">500</span> <span class="va">spots</span> <span class="va">finished</span> <span class="va">in</span> <span class="va">time</span> <span class="fl">182.9503</span><span class="va">s</span></span>
<span id="cb10-39"><a href="step-5-test-data-and-future-directions.html#cb10-39" aria-hidden="true" tabindex="-1"></a><span class="fl">600</span> <span class="va">spots</span> <span class="va">finished</span> <span class="va">in</span> <span class="va">time</span> <span class="fl">222.0649</span><span class="va">s</span></span>
<span id="cb10-40"><a href="step-5-test-data-and-future-directions.html#cb10-40" aria-hidden="true" tabindex="-1"></a><span class="fl">700</span> <span class="va">spots</span> <span class="va">finished</span> <span class="va">in</span> <span class="va">time</span> <span class="fl">263.1166</span><span class="va">s</span></span>
<span id="cb10-41"><a href="step-5-test-data-and-future-directions.html#cb10-41" aria-hidden="true" tabindex="-1"></a><span class="fl">800</span> <span class="va">spots</span> <span class="va">finished</span> <span class="va">in</span> <span class="va">time</span> <span class="fl">303.7525</span><span class="va">s</span></span>
<span id="cb10-42"><a href="step-5-test-data-and-future-directions.html#cb10-42" aria-hidden="true" tabindex="-1"></a><span class="fl">900</span> <span class="va">spots</span> <span class="va">finished</span> <span class="va">in</span> <span class="va">time</span> <span class="fl">343.7924</span><span class="va">s</span></span>
<span id="cb10-43"><a href="step-5-test-data-and-future-directions.html#cb10-43" aria-hidden="true" tabindex="-1"></a>.</span>
<span id="cb10-44"><a href="step-5-test-data-and-future-directions.html#cb10-44" aria-hidden="true" tabindex="-1"></a>.</span>
<span id="cb10-45"><a href="step-5-test-data-and-future-directions.html#cb10-45" aria-hidden="true" tabindex="-1"></a>.</span></code></pre></div>
<p>Zoomed in versions from <code>spotspotcheck</code> are shown below for better visualization.
<img src="images/human_heart_HE.png" title="Image 1" width="350"/> <img src="images/human_heart_BW.png" title="Image 2" width="350"/>
1.Output from spotspotcheck <a href="https://github.com/LieberInstitute/VistoSeg/blob/main/pipeline_outputs/spotspotcheck/tissue_spot_counts_heart.csv">tissue_spot_counts.csv</a><br />
2.Final nuclei segmentations: <a href="https://github.com/LieberInstitute/VistoSeg/blob/main/pipeline_outputs/refineVNS/V1_Human_Heart_image_nuclei.mat">nuclei.mat</a></p>
<p>B. Breast Tissue</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb11-1"><a href="step-5-test-data-and-future-directions.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="va">code</span> <span class="op">=</span> <span class="ss">&#39;/path to the code/VistoSeg/code&#39;</span><span class="op">;</span></span>
<span id="cb11-2"><a href="step-5-test-data-and-future-directions.html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="va">addpath</span>(<span class="va">genpath</span>(<span class="va">code</span>))</span>
<span id="cb11-3"><a href="step-5-test-data-and-future-directions.html#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="va">fname</span> <span class="op">=</span> <span class="ss">&#39;/path to the file/V1_Human_Heart_image.tif&#39;</span><span class="op">;</span></span>
<span id="cb11-4"><a href="step-5-test-data-and-future-directions.html#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="va">N</span> <span class="op">=</span> <span class="fl">3</span><span class="op">;</span></span>
<span id="cb11-5"><a href="step-5-test-data-and-future-directions.html#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="step-5-test-data-and-future-directions.html#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="va">VNS</span>(<span class="va">fname</span><span class="op">,</span><span class="va">N</span>)</span>
<span id="cb11-7"><a href="step-5-test-data-and-future-directions.html#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="va">Importing</span> <span class="va">capture</span> <span class="va">area</span></span>
<span id="cb11-8"><a href="step-5-test-data-and-future-directions.html#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="va">Elapsed</span> <span class="va">time</span> <span class="va">is</span> <span class="fl">42.738974</span> <span class="va">seconds</span>.</span>
<span id="cb11-9"><a href="step-5-test-data-and-future-directions.html#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="va">Performing</span> <span class="va">smoothening</span> <span class="va">and</span> <span class="va">contrast</span> <span class="va">adjustment</span></span>
<span id="cb11-10"><a href="step-5-test-data-and-future-directions.html#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="va">Elapsed</span> <span class="va">time</span> <span class="va">is</span> <span class="fl">180.821916</span> <span class="va">seconds</span>.</span>
<span id="cb11-11"><a href="step-5-test-data-and-future-directions.html#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="va">Performing</span> <span class="va">rgb</span> <span class="va">to</span> <span class="va">Lab</span> <span class="va">color</span> <span class="va">space</span> <span class="va">conversion</span></span>
<span id="cb11-12"><a href="step-5-test-data-and-future-directions.html#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="va">Elapsed</span> <span class="va">time</span> <span class="va">is</span> <span class="fl">77.897834</span> <span class="va">seconds</span>.</span>
<span id="cb11-13"><a href="step-5-test-data-and-future-directions.html#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="va">Applying</span> <span class="va">Kmeans</span></span>
<span id="cb11-14"><a href="step-5-test-data-and-future-directions.html#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="va">Elapsed</span> <span class="va">time</span> <span class="va">is</span> <span class="fl">1909.580117</span> <span class="va">seconds</span>.</span>
<span id="cb11-15"><a href="step-5-test-data-and-future-directions.html#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="va">saving</span> <span class="va">outputs</span></span>
<span id="cb11-16"><a href="step-5-test-data-and-future-directions.html#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="va">Starting</span> <span class="va">parallel</span> <span class="va">pool</span> (<span class="va">parpool</span>) <span class="va">using</span> <span class="va">the</span> <span class="ss">&#39;local&#39;</span> <span class="va">profile</span> <span class="op">...</span></span>
<span id="cb11-17"><a href="step-5-test-data-and-future-directions.html#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="va">Connected</span> <span class="va">to</span> <span class="va">the</span> <span class="va">parallel</span> <span class="va">pool</span> (<span class="va">number</span> <span class="va">of</span> <span class="va">workers</span><span class="op">:</span> <span class="fl">2</span>).</span>
<span id="cb11-18"><a href="step-5-test-data-and-future-directions.html#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="va">Elapsed</span> <span class="va">time</span> <span class="va">is</span> <span class="fl">352.156689</span> <span class="va">seconds</span>.</span>
<span id="cb11-19"><a href="step-5-test-data-and-future-directions.html#cb11-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-20"><a href="step-5-test-data-and-future-directions.html#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="va">M</span> <span class="op">=</span> <span class="fl">1</span></span>
<span id="cb11-21"><a href="step-5-test-data-and-future-directions.html#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="va">refineVNS</span>(<span class="va">fname</span><span class="op">,</span><span class="va">M</span>)</span>
<span id="cb11-22"><a href="step-5-test-data-and-future-directions.html#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="va">loading</span> <span class="va">data</span></span>
<span id="cb11-23"><a href="step-5-test-data-and-future-directions.html#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="va">Elapsed</span> <span class="va">time</span> <span class="va">is</span> <span class="fl">10.504537</span> <span class="va">seconds</span>.</span>
<span id="cb11-24"><a href="step-5-test-data-and-future-directions.html#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="va">refining</span> <span class="va">segmentations</span></span>
<span id="cb11-25"><a href="step-5-test-data-and-future-directions.html#cb11-25" aria-hidden="true" tabindex="-1"></a><span class="va">Elapsed</span> <span class="va">time</span> <span class="va">is</span> <span class="fl">229.784656</span> <span class="va">seconds</span>.</span>
<span id="cb11-26"><a href="step-5-test-data-and-future-directions.html#cb11-26" aria-hidden="true" tabindex="-1"></a><span class="va">saving</span> <span class="va">final</span> <span class="va">segmentations</span></span>
<span id="cb11-27"><a href="step-5-test-data-and-future-directions.html#cb11-27" aria-hidden="true" tabindex="-1"></a><span class="va">Elapsed</span> <span class="va">time</span> <span class="va">is</span> <span class="fl">18.292739</span> <span class="va">seconds</span>.</span>
<span id="cb11-28"><a href="step-5-test-data-and-future-directions.html#cb11-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-29"><a href="step-5-test-data-and-future-directions.html#cb11-29" aria-hidden="true" tabindex="-1"></a><span class="va">mask</span> <span class="op">=</span> <span class="ss">&#39;/path to the file/V1_Breast_Cancer_Block_A_Section_1_image_nuclei.mat&#39;</span><span class="op">;</span></span>
<span id="cb11-30"><a href="step-5-test-data-and-future-directions.html#cb11-30" aria-hidden="true" tabindex="-1"></a><span class="va">jsonname</span> <span class="op">=</span> <span class="ss">&#39;/path to the file/scalefactors_json.json&#39;</span><span class="op">;</span></span>
<span id="cb11-31"><a href="step-5-test-data-and-future-directions.html#cb11-31" aria-hidden="true" tabindex="-1"></a><span class="va">posname</span> <span class="op">=</span> <span class="ss">&#39;/path to the file/tissue_positions_list.csv&#39;</span><span class="op">;</span></span>
<span id="cb11-32"><a href="step-5-test-data-and-future-directions.html#cb11-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-33"><a href="step-5-test-data-and-future-directions.html#cb11-33" aria-hidden="true" tabindex="-1"></a><span class="va">countNuclei</span>(<span class="va">mask</span><span class="op">,</span> <span class="va">jsonname</span><span class="op">,</span> <span class="va">posname</span>)</span>
<span id="cb11-34"><a href="step-5-test-data-and-future-directions.html#cb11-34" aria-hidden="true" tabindex="-1"></a><span class="va">loading</span> <span class="va">data</span></span>
<span id="cb11-35"><a href="step-5-test-data-and-future-directions.html#cb11-35" aria-hidden="true" tabindex="-1"></a><span class="va">Elapsed</span> <span class="va">time</span> <span class="va">is</span> <span class="fl">10.565088</span> <span class="va">seconds</span>.</span>
<span id="cb11-36"><a href="step-5-test-data-and-future-directions.html#cb11-36" aria-hidden="true" tabindex="-1"></a><span class="fl">576311</span> <span class="va">cells</span> <span class="va">detected</span></span>
<span id="cb11-37"><a href="step-5-test-data-and-future-directions.html#cb11-37" aria-hidden="true" tabindex="-1"></a><span class="fl">4992</span> <span class="va">spots</span> <span class="va">detected</span></span>
<span id="cb11-38"><a href="step-5-test-data-and-future-directions.html#cb11-38" aria-hidden="true" tabindex="-1"></a><span class="va">counting</span> <span class="va">nuclei</span> <span class="va">per</span> <span class="va">spot</span></span>
<span id="cb11-39"><a href="step-5-test-data-and-future-directions.html#cb11-39" aria-hidden="true" tabindex="-1"></a><span class="fl">100</span> <span class="va">spots</span> <span class="va">finished</span> <span class="va">in</span> <span class="va">time</span> <span class="fl">602.9623</span><span class="va">s</span></span>
<span id="cb11-40"><a href="step-5-test-data-and-future-directions.html#cb11-40" aria-hidden="true" tabindex="-1"></a><span class="fl">200</span> <span class="va">spots</span> <span class="va">finished</span> <span class="va">in</span> <span class="va">time</span> <span class="fl">1305.658</span><span class="va">s</span></span>
<span id="cb11-41"><a href="step-5-test-data-and-future-directions.html#cb11-41" aria-hidden="true" tabindex="-1"></a>.</span>
<span id="cb11-42"><a href="step-5-test-data-and-future-directions.html#cb11-42" aria-hidden="true" tabindex="-1"></a>.</span>
<span id="cb11-43"><a href="step-5-test-data-and-future-directions.html#cb11-43" aria-hidden="true" tabindex="-1"></a>.</span></code></pre></div>
<p>Below images are the raw Histology tif file of breast tissue and the extracted/segmented nuclei.
<img src="images/tissue_hires_image.png" title="Image 1" width="350"/> <img src="images/Breast_nuclei.png" title="Image 2" width="350"/></p>
<p>1.Output from spotspotcheck <a href="https://github.com/LieberInstitute/VistoSeg/blob/main/pipeline_outputs/spotspotcheck/tissue_spot_counts_breast.csv">tissue_spot_counts.csv</a><br />
2.Final nuclei segmentations: <a href="https://github.com/LieberInstitute/VistoSeg/blob/main/pipeline_outputs/refineVNS/V1_Human_Heart_image_nuclei.mat">nuclei.mat</a></p>
</div>
<div id="future-directions" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Future directions</h2>
<ol style="list-style-type: decimal">
<li>Integrate Atlas Aligner for brain region identification</li>
<li>Integrate <a href="https://www.nature.com/articles/srep18437">VAMPIRE</a> for cell morphology detection</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="step-4-gui-to-count-nuclei-in-a-visium-spot.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="r-session-information.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
